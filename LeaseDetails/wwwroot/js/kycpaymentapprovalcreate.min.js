function GetKYCDetails(){HttpGet(`/KycPaymentApproval/KYCFormView/?Id=${$("#KycId").val()}`,"html",function(n){$("#KYCFormDetailsDiv").html("");$("#KYCFormDetailsDiv").html(n)})}function GetPayment(){HttpGet(`/KycPaymentApproval/PaymentDetails/?Id=${$("#Id").val()}`,"html",function(n){$("#divPayment").html("");$("#divPayment").html(n)})}function GetPaymentFromBhoomi(){HttpGet(`/KycPaymentApproval/PaymentFromBhoomi/?FileNo=${$("#FileNo").val()}`,"html",function(n){$("#divPaymentFromBhoomi").html("");$("#divPaymentFromBhoomi").html(n)})}function GetApplicantChallan(){HttpGet(`/KycPaymentApproval/GetChallanDetails/?Id=${$("#Id").val()}`,"html",function(n){$("#divChallan").html("");$("#divChallan").html(n);$("#Challan1").find("tbody").find("tr").each(function(){$(this).find("#item_IsVerified").val()=="T"?$(this).find('input[name="Verifychk"]').prop("checked",!0):$(this).find('input[name="Verifychk"]').prop("checked",!1)})})}function GetHistoryDetails(n){HttpGet(`/KycPaymentApproval/HistoryDetails/?Id=${n}`,"html",function(n){$("#divHistoryDetails").html("");$("#divHistoryDetails").html(n)})}function callSelect2(){$("select").select2({placeholder:"Select",allowClear:!0})}function ApprovalRemarksMessage(){var n=$("#ApprovalRemarks").val();return n==""?"Approval Remarks is Mandatory":""}function ApprovalStatusIdMessage(){var n=$("#ApprovalStatus").val();return n==""?"Approval Status is Mandatory":""}function fileValidation(n,t,i){return/(\.jpg|\.jpeg|\.png|\.pdf)$/i.exec(n)?i>10535049?(alert("File must be of 10 MB or Lesser Than 10 MB"),t.value="",!1):void 0:(alert("Invalid file type"),t.value="",!1)}function GetApprvoalStatus(n){HttpGet(`/KycPaymentApproval/GetApprvoalStatus/?value=${n}`,"json",function(n){n!=null?($("#ApprovalStatusCode").val(n.statusCode),n.statusCode==$("#QueryForwardCode").val()?($("#RoleListDiv").show(),$("#UserListDiv").show()):n.statusCode==$("#ForwardCode").val()?($("#RoleListDiv").hide(),$("#UserListDiv").show(),GetForwardedUserList()):($("#RoleListDiv").hide(),$("#UserListDiv").hide()),callSelect2()):($("#ApprovalStatusCode").val(0),$("#RoleListDiv").hide(),$("#UserListDiv").hide())})}function GetUserList(n){HttpGet(`/KycPaymentApproval/GetUserList/?value=${n}`,"json",function(n){for(var i='<option selected="selected" disabled="disabled" value="0">--Select-- <\/option>',t=0;t<n.length;t++)i=i+"<option value="+n[t].userId+">"+n[t].name+"<\/option>";$("#ApprovalUserId").val(null).trigger("change");$("#ApprovalUserId").html(i)})}function GetParam(){return{Id1:parseInt($("#Id").val()),statusId:parseInt($("#ApprovalStatus option:selected").val())}}function GetForwardedUserList(){var n=GetParam();HttpPostAsync(`/KycPaymentApproval/GetForwardedUserList/`,"json",n,function(n){var i,t;if(n!=null)if(n[0]=="false")WarningMessage(n[1]);else{for(i='<option selected="selected" disabled="disabled" value="0">--Select-- <\/option>',t=0;t<n.length;t++)i=i+"<option value="+n[t].userId+">"+n[t].name+"<\/option>";$("#ApprovalUserId").val(null).trigger("change");$("#ApprovalUserId").html(i)}})}function UpdatePaymentDetails(){var n=GetUpdatedPaymentParam();HttpPostAsync(`/KycPaymentApproval/UpdatePayment/`,"json",n,function(n){n.trim()=="Record Not Updated"?DisplayErrorMessages(n):SuccessMessage(n)})}function GetUpdatedPaymentParam(){var t=null,n=[];return $("#pay1").find("tbody").find("tr").each(function(){t={KycId:parseInt($(this).find("#item_KycId").val()),DemandPaymentId:parseInt($(this).find("#item_DemandPaymentId").val()),DemandPeriod:$(this).find("#item_DemandPeriod").val(),GroundRent:parseFloat($(this).find("#item_GroundRent").val()),InterestRate:parseFloat($(this).find("#item_InterestRate").val()),TotdalDues:parseFloat($(this).find("#item_TotdalDues").val()),TotalPayable:parseFloat($("#TotalPayable").val()),TotalPayableInterest:parseFloat($("#TotalPayableInterest").val()),TotalPayableDues:parseFloat($("#TotalDues").val())};n.push(t)}),console.log(n),n}function UpdateChallanDetails(){var n=GetUpdatedChallanParam();HttpPostAsync(`/KycPaymentApproval/UpdateChallan/`,"json",n,function(n){n.trim()=="Record Not Updated"?DisplayErrorMessages(n):SuccessMessage(n)})}function GetUpdatedChallanParam(){var t=null,n=[];return $("#Challan1").find("tbody").find("tr").each(function(){t={KycId:parseInt($(this).find("#item_KycId").val()),DemandPaymentId:parseInt($(this).find("#item_DemandPaymentId").val()),IsVerified:$(this).find("#Verifychk1").is(":checked")==!0?"T":"F",PaymentType:$(this).find("#item_PaymentType").val(),Period:$(this).find("#item_Period").val(),ChallanNo:$(this).find("#item_ChallanNo").val(),Amount:parseFloat($(this).find("#Amount").val()),DateofPaymentByAllottee:$(this).find("#item_DateofPaymentByAllottee").val(),Proofinpdf:$(this).find("#item_Proofinpdf").val(),Ddabankcredit:$(this).find("#item_Ddabankcredit").val(),TotalPayable:parseFloat($("#TotalPayable").val()),TotalPayableInterest:parseFloat($("#TotalPayableInterest").val()),TotalPayableDues:parseFloat($("#TotalDues").val())};n.push(t)}),console.log(n),n}function chkmsg(n){return $(n).is(":checked")?confirm("Are you sure you want to mark this records as verified? it means this record will be saved in Bhoomi application as verified payment record."):confirm("Are you sure you want to mark this records as unverified?")}function GetChallanParamForAPI(){var n=[];return $("#Challan1").find("tbody").find("tr").each(function(){var i=$(this).find("#Verifychk1").is(":checked")==!0?"T":"F",t=null;i=="T"&&(t={CHLLN_NO:$(this).find("#item_ChallanNo").val(),CHLLN_AMNT:parseFloat($(this).find("#Amount").val()),DPST_DT:$(this).find("#item_DateofPaymentByAllottee").val(),USR_ID:"0",SCHM_ID:"0",FL_NMBR:$("#FileNo").val()},n.push(t))}),console.log(n),n}function UpdateDetailsInBhoomi(){var n=GetChallanParamForAPI();HttpPostAsync(`/KycPaymentApproval/UpdateBhoomi/`,"json",n,function(n){n.trim()=="Record Not Updated"?DisplayErrorMessages(n):SuccessMessage(n)})}$(document).ready(function(){var n=parseInt($("#Id").val());GetKYCDetails(n);GetHistoryDetails(n);GetPayment();GetPaymentFromBhoomi();GetApplicantChallan();$("#ApprovalStatus").val("0").trigger("change")});$("#collapse").click(function(){$("#collapsekycform").collapse("toggle").promise().done(function(){$("select").select2({placeholder:"Select",allowClear:!0})})});$("#collapse").click(function(){$("#collapsePaymentRpt").collapse("toggle").promise().done(function(){$("select").select2({placeholder:"Select",allowClear:!0})})});$("#collapse").click(function(){$("#collapsePayment").collapse("toggle").promise().done(function(){$("select").select2({placeholder:"Select",allowClear:!0})})});$("#collapse").click(function(){$("#collapseApprroval").collapse("toggle").promise().done(function(){$("select").select2({placeholder:"Select",allowClear:!0})})});$("#collapse").click(function(){$("#collapseHistoryApprroval").collapse("toggle").promise().done(function(){$("#select").select2({placeholder:"Select",allowClear:!0})})});$("#myForm").validate({rules:{ApprovalStatusId:{required:!0},ApprovalRemarks:{required:!0}},messages:{ApprovalStatusId:{required:ApprovalStatusIdMessage},ApprovalRemarks:{required:ApprovalRemarksMessage}},highlight:function(n){$(n).closest(".form-group").addClass("has-error")},unhighlight:function(n){$(n).closest(".form-group").removeClass("has-error")},errorElement:"span",errorClass:"help-block",errorPlacement:function(n,t){t.parent(".input-group").length?n.insertAfter(t.parent()):n.insertAfter(t)},submitHandler:function(){return!0}});$("#ApprovalDocument").change(function(){var n=document.getElementById("ApprovalDocument"),t=n.value;const i=ApprovalDocument.files[0].size;fileValidation(t,n,i)});$("#btnCreate").click(function(){var n=!1,u=$("#ApprovalStatus option:selected").val(),i,t,r;return parseInt(u)<1?(n=!1,$("#ApprovalStatusMessage").show()):(n=!0,$("#ApprovalStatusMessage").hide()),i=$("#ApprovalRoleId option:selected").val(),parseInt(i)<1?(n=!1,$("#ApprovalRoleIdMessage").show()):(n=!0,$("#ApprovalRoleIdMessage").hide()),t=$("#ApprovalUserId option:selected").val(),parseInt(t)<1?(n=!1,$("#ApprovalUserIdMessage").show()):(n=!0,$("#ApprovalUserIdMessage").hide()),r=$("#ApprovalRemarks").val(),r==""?(n=!1,$("#ApprovalRemarksMessage").show()):(n=!0,$("#ApprovalRemarksMessage").hide()),(parseInt(u)<1||r=="")&&(n=!1),$("#ApprovalStatusCode").val()==$("#QueryForwardCode").val()&&(parseInt(i)<1||parseInt(t)<1)&&(n=!1),$("#ApprovalStatusCode").val()==$("#ForwardCode").val()&&parseInt(t)<1&&(n=!1),n});